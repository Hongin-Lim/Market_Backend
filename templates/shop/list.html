{% extends 'home/base.html' %}
{% block body %}
{% load static %}

<center><a class="nav-link btn btn-outline-success" href="{% url 'cart:detail' %}">장바구니
    {% if cart|length > 0 %}
    ${{ cart.get_product_total }} with {{ cart|length }} items
    {% else %}
    : Empty
    {% endif %}
</a></center>
<div id="content">

    <div id="qnb" class="quick-navigation" style="top: 70px;">
        <style>
    #qnb{position:absolute;z-index:1;right:20px;top:70px;width:80px;font:normal 12px/16px "Noto Sans";color:#333;letter-spacing:-0.3px;transition:top 0.2s}
    .goods-goods_view #qnb{top:20px}
    /* 배너 */
    #qnb .bnr_qnb{padding-bottom:7px}
    #qnb .bnr_qnb .thumb{width:80px;height:120px;vertical-align:top}
    /* 메뉴 */
    #qnb .side_menu{width:80px;border:1px solid #ddd;border-top:0 none;background-color:#fff}
    #qnb .link_menu{display:block;height:29px;padding-top:5px;border-top:1px solid #ddd;text-align:center}
    #qnb .link_menu:hover,
    #qnb .link_menu.on{color:#5f0080}
    /* 최근본상품 */
    #qnb .side_recent{position:relative;margin-top:6px;border:1px solid #ddd;background-color:#fff}
    #qnb .side_recent .tit{display:block;padding:22px 0 6px;text-align:center}
    #qnb .side_recent .list_goods{overflow:hidden;position:relative;width:60px;margin:0 auto}
    #qnb .side_recent .list{position:absolute;left:0;top:0}
    #qnb .side_recent .link_goods{display:block;overflow:hidden;width:60px;height:80px;padding:1px 0 2px}
    #qnb .side_recent .btn{display:block;overflow:hidden;width:100%;height:17px;border:0 none;font-size:0;line-height:0;text-indent:-9999px}

    #qnb .side_recent .btn_up{position:absolute;left:0;top:0;background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up_hover.png) no-repeat 50% 50%}
    #qnb .side_recent .btn_up.off{background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up.png) no-repeat 50% 50%}
    #qnb .side_recent .btn_down{background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down_hover.png) no-repeat 50% 0}
    #qnb .side_recent .btn_down.off{background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down.png) no-repeat 50% 0}


    @media
    only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (min-device-pixel-ratio: 1.5),
    only screen and (min-resolution: 1.5dppx) {
        #qnb .side_recent .btn_up{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up_hover_x2.png);background-size:12px 18px}
        #qnb .side_recent .btn_down{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down_hover_x2.png);background-size:12px 18px}
        #qnb .side_recent .btn_up.off{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up_x2.png);background-size:12px 18px}
        #qnb .side_recent .btn_down.off{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down_x2.png);background-size:12px 18px}
    }
    @media all and (max-width: 1250px){
        #qnb{display:none}
    }











        </style>

        <div class="bnr_qnb" id="brnQuick"><a href="/shop/board/view.php?id=notice&amp;no=64" id="brnQuickObj">
            <img class="thumb" src="https://res.kurly.com/pc/service/main/1904/bnr_quick_20190403.png" alt="퀄리티있게 샛별배송">
        </a>
            <script>
    var brnQuickScript = (function(){
        var $target = $('#brnQuickObj'), $targetThumb = $('#brnQuickObj .thumb');
        // 시간체크
        function timeCheck(){
            var now = brnQuick.nowTime; // 호출 하는 js에서 변수선언되어 가져다 사용
            if( new Date('2020-12-31T11:00:00+09:00').getTime() <= now && now < new Date('2021-01-15T11:00:00+09:00').getTime() ){
              $target.attr('href', '/shop/event/kurlyEvent.php?htmid=event/2020/1231/newyearsday');
              $targetThumb.attr('src', 'https://res.kurly.com/pc/service/main/2012/bnr_quick.png');
              $targetThumb.attr('alt', '2021 설 선물');
            }else if(  new Date('2021-01-15T11:00:00+09:00').getTime() <= now && now <= new Date('2021-02-10T23:00:00+09:00').getTime() ){
              $target.attr('href', '/shop/event/kurlyEvent.php?htmid=event/2021/0115/newyearsday');
              $targetThumb.attr('src', 'https://res.kurly.com/pc/service/main/2101/bnr_quick.png');
              $targetThumb.attr('alt', '2021 설 선물');
            }
        }
        return {
            timeCheck : timeCheck
        }
    })();
    brnQuickScript.timeCheck();











            </script>


        </div>
        <script>
    var brnQuick = {
        nowTime : '1654135060646',
        update : function(){
            $.ajax({
                url : campaginUrl + 'pc/service/bnr_quick.html'
            }).done(function(result){
                $('#brnQuick').html(result);
            });
        }
    }
    brnQuick.update();











        </script>

        <div class="side_menu">
            <a href="/shop/main/html.php?htmid=event/kurly.htm&amp;name=lovers" class="link_menu ">등급별 혜택</a>
            <a href="/shop/board/list.php?id=recipe" class="link_menu ">레시피</a>
            <a href="/shop/goods/goods_review_best.php" class="link_menu ">베스트 후기</a>
        </div>
        <div class="side_recent" style="display:none">
            <strong class="tit">최근 본 상품</strong>
            <div class="list_goods" data-height="209" style="height: 0px;">
                <ul class="list"></ul>
            </div>
            <button type="button" class="btn btn_up off">최근 본 상품 위로 올리기</button>
            <button type="button" class="btn btn_down off">최근 본 상품 아래로 내리기</button>
        </div>
        <script>
/**
 * 상품상세일때 현재 보고 있는 상품 담기. 상품URL & 상품이미지
 * 최종 저장 날짜로 부터 24시가 지날시 localStorage 삭제
 */
var getGoodsRecent = (function(){
    var i, len, getGoodsRecent, item, _nowTime = '1654135060646';

    _goodsRecent();
    function _goodsRecent(){
        if(localStorage.getItem('goodsRecent') === null){
            return false;
        }

        try{
            getGoodsRecent = JSON.parse(localStorage.getItem("goodsRecent"));
            len = getGoodsRecent.length;
            if(addDays(getGoodsRecent[len - 1].time, 1) < _nowTime){
                localStorage.removeItem('goodsRecent');
            }else{
                for(i = 0; i < len; i++){
                    item = '<li><a class="link_goods" href="/shop/goods/goods_view.php?goodsno=' + getGoodsRecent[i].no + '"><img src="' + getGoodsRecent[i].thumb + '" alt=""></a></li>';
                    $('.side_recent .list').append(item);
                }
                $('.side_recent').show();
            }
        } catch(e){
            console.log("JSON parse error from the Quick menu goods list!!!", e);
        }
    }

    function addDays(date, days){
        var result = new Date(date);
        result.setDate(result.getDate() + days);
        return result.getTime();
    }

    // return {
    // }
})();











        </script>
    </div>
    <script>
// KMF-1257 이벤트상품
eventApple('list', '029');











    </script>
    <div class="page_aticle">
        <div id="lnbMenu" class="lnb_menu">
            <div id="bnrCategory" class="bnr_category" style="">
                <div class="thumb"><img src="" alt="카테고리배너"></div>
            </div>
            <div class="inner_lnb"><h3 class="tit">BEST 상품</h3>
                <ul class="list" style="">
                    <li data-start="172" data-end="188"><a class="on">전체보기</a></li>
                    <li class="bg"></li>
                </ul>
            </div>
        </div>
        <div id="goodsList" class="page_section section_goodslist">
            <div class="list_ability">
                <div class="sort_menu">
                    <div><p class="count"><span class="inner_count">          총 306개        </span></p>
                        <div class="select_type"><a class="name_select">추천순</a><!----><!----><!----><!----><!---->
                            <ul class="list">
                                <li class=""><a class="on">추천순</a>
                                    <div class="recommend"><!----> <!---->
                                        <div id="layerRecommend" class="layer_recommend"><p class="desc">검색어 적합성과 소비자
                                            인기도(판매량, 판매금액,<br> 조회수 등)를 종합적으로 고려한 순서입니다.</p></div>
                                    </div>
                                </li>
                                <li class=""><a class="">신상품순</a> <!----></li>
                                <li class=""><a class="">판매량순</a> <!----></li>
                                <li class=""><a class="">혜택순</a> <!----></li>
                                <li class=""><a class="">낮은 가격순</a> <!----></li>
                                <li class=""><a class="">높은 가격순</a> <!----></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="list_goods">
                <div class="inner_listgoods">
                    <ul class="list">
                        <!--상품 리스트 시작-->
                        {% for product in products %}
                        <li>
                            <div class="item">
                                <div class="thumb">
                                    <a class="img"
                                       style="background-image: url(&quot;https://img-cf.kurly.com/shop/data/goods/1637154205701l0.jpg&quot;)width:600px; height:338px;"
                                       href="{{product.id}}/{{product.slug}}/">
                                        <img src="{{product.image.url}}">
                                    </a>
                                </div>
                                <div>
                                    <a class="info">
                                        <span class="name">{{product.name}}</span>
                                        <span class="cost">
                                        <span class="price">{{product.price}}원</span> <!---->
                                    </span>
                                        <a><span class="desc">{{product.description | truncatewords:10 }}</span></a>
                                        <span class="tag">
                                        <span class="ico limit tag_type2">VERY Only</span>
                                        <span class="ico limit">재활용 우수</span></span>
                                    </a>
                                    <div class="css-1a83kvf em4wzeq1">
                                        <form action="{% url 'cart:product_add' product.id %}" method="post">
                                            {{ add_to_cart }}
                                            {% csrf_token %}
                                            <button class="css-1m1ntoc em4wzeq0" type="submit">
                                                <img
                                                        src="https://s3.ap-northeast-2.amazonaws.com/res.kurly.com/kurly/ico/2021/cart_white_45_45.svg"
                                                        alt="상품 카트에 담기 아이콘">
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </li>
                        {% endfor %}
                        <!--상품 리스트 끝-->
                    </ul>
                </div>
            </div>
            <div>

            </div>
            <div class="layout-pagination">
                <div class="pagediv"><a href="#main" class="layout-pagination-button layout-pagination-first-page">맨 처음
                    페이지로 가기</a> <a href="#main" class="layout-pagination-button layout-pagination-prev-page">이전 페이지로
                    가기</a> <span><!----> <strong
                        class="layout-pagination-button layout-pagination-number __active">1</strong></span><span><a
                        class="layout-pagination-button layout-pagination-number">2</a> <!----></span><span><a
                        class="layout-pagination-button layout-pagination-number">3</a> <!----></span><span><a
                        class="layout-pagination-button layout-pagination-number">4</a> <!----></span> <a href="#main"
                                                                                                          class="layout-pagination-button layout-pagination-next-page">다음
                    페이지로 가기</a> <a href="#main" class="layout-pagination-button layout-pagination-last-page">맨 끝 페이지로
                    가기</a></div>
            </div>
        </div>
    </div>
    <div class="bg_loading" id="bgLoading" style="display: none;">
        <div class="loading_show"></div>
    </div>
    <script src="{% static 'js/common_filter.js' %}"></script>
    <script src="/common_js/goodslist_v1.js?ver=1.70.8"></script>
    <script type="text/javascript">
  $(document).ready(function(){
    var categoryNo = null;
    if(sessionStorage.getItem('goodsListReferrer') && sessionStorage.getItem('goodsListReferrer') === 'goodsView'){
      // 이전페이지가 상품상세일경우
      lnbMenu.referrer = true;
      goodsList.referrer = true;
      if(sessionStorage.getItem('gListCategoryNo') && '029' != '029' && '029' != '038'){
        categoryNo = sessionStorage.getItem('gListCategoryNo');
      }else{
        categoryNo = "029";
      }
    }else{
      lnbMenu.referrer = false;
      goodsList.referrer = false;
      categoryNo = "029";
    }

    // 카테고리호출
    lnbMenu.getCategoryNum = categoryNo;

    // 상품목록노출
    goodsList.pageType="list"; // 일반
    goodsList.type = "pc";

    lnbMenu.update();
  });











    </script>
</div>

{% endblock %}